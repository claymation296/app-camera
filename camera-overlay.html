
<style include="app-shared-styles">

  :host {
    --camera-overlay-ui-background-color: rgb(33, 33, 33);
    --camera-overlay-ui-color: var(--app-accent-color);
  }

  #overlay {
    background-color: black;
  }

  #content {   
    display:         flex;
    justify-content: center;
    align-items:     center;
    position:        relative;
    height:          100%;
    overflow:        hidden;
  }

  #cam {
    height: 100%;
    width:  100%;

    --button-background-color: var(--camera-overlay-ui-background-color);
    --button-color:            var(--camera-overlay-ui-color);
  }

  #img,
  #flip {
    position: absolute;
    top:      unset;
    right:    unset;
    bottom:   16px;
    left:     16px;
    height:   64px;
    width:    64px;
    background-color: transparent;
  }

  #btn-wrapper {
    display:       inline-block;    
    position:      absolute;
    top:           16px;
    left:          16px;
    border-radius: 50%;
    z-index:       1;
  }

  #btn-wrapper::before {
    content:  ' ';
    position: absolute;
    top:      0px;
    right:    0px;
    bottom:   0px;
    left:     0px;    
    opacity:  0.5;

    /*
      Box shadow will not render if #btn-wrapper 
      has overlay mask settings, so apply them here.
    */
    border-radius:       50%;
    overflow:            hidden;      
    -webkit-mask-image: -webkit-radial-gradient(white, black);

    -webkit-backdrop-filter: blur(10px);
    backdrop-filter:         blur(10px);
    background-color:        var(--camera-overlay-ui-background-color);
  }

  paper-icon-button {
    color: var(--camera-overlay-ui-color);
  }

</style>


<app-overlay id="overlay"
             above-safari-nav
             modal
             prebuilt-animation="from-right"
             on-overlay-reset="__resetHandler">

  <div id="content">

    <app-camera id="cam"
                default-camera="[[defaultCamera]]" 
                no-capture="[[noCapture]]"
                on-app-camera-permission-denied="__permissionDeniedHandler"
                on-app-camera-photo-capture-changed="__photoCaptureChangedHandler"
                on-app-camera-streaming-changed="__streamingChangedHandler">


      <lazy-image id="img"
                  class$="[[_imgClass]]"
                  alt="Last camera capture."
                  no-fade
                  placeholder="[[_placeholder]]"
                  slot="ui"
                  src="[[_src]]"
                  on-click="__imgClickHandler"
                  on-lazy-image-placeholder-loaded-changed="__placeHolderLoadedHandler"
                  on-lazy-image-loaded-changed="__srcLoadedHandler">
      </lazy-image>

      <flip-image id="flip"
                  measurements="[[_measurements]]"
                  slot="ui"
                  src="[[_capture]]">
      </flip-image>


    </app-camera>

    <div id="btn-wrapper"
         class="shared-card-shadow">
      <paper-icon-button icon="app-icons:arrow-back"
                         on-click="__backBtnClicked">
      </paper-icon-button>
    </div>

  </div>

</app-overlay>


<app-file-system id="fs"
                 accept="image" 
                 coll="test"
                 dark-mode="[[darkMode]]"
                 list="photos"
                 multiple>
</app-file-system>
